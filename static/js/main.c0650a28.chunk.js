(this.webpackJsonpstocks=this.webpackJsonpstocks||[]).push([[0],{111:function(e,t,n){e.exports=n(164)},120:function(e,t,n){},164:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(8),o=n.n(r),l=n(64),c=(n(116),n(117),n(118),n(119),n(120),n(19)),u=n(27),s=n(21),m=n(22),g=n(25),d=n(23),f=n(26),v=n(14),p=n(35),h=n.n(p),E=n(9),b=n(167),y=n(24);var S=Object(y.a)((function(e){return i.a.createElement(b.e,{content:i.a.createElement("div",{width:200,style:{padding:10}},i.a.createElement(b.f,e))},i.a.createElement(b.b,{icon:"filter",minimal:!0}))}));var j=Object(y.a)((function(e){var t=e.history,n=e.companies,a=e.onChange,r=e.fittRange,o=e.dividendRatioRange,l=e.peRange,c=e.yieldRange,u=n.sortBy((function(e){return-e.get("estimate")}));return i.a.createElement("table",{className:"bp3-html-table .modifier",key:"insideTable"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Estimate"),i.a.createElement("th",null,"Yield",i.a.createElement(S,Object.assign({onChange:function(e){return a({yieldRange:e})}},c,{stepSize:.01,labelStepSize:.2,vertical:!0}))),i.a.createElement("th",null,"P/E",i.a.createElement(S,Object.assign({onChange:function(e){return a({peRange:e})}},l,{stepSize:1,labelStepSize:10,vertical:!0}))),i.a.createElement("th",null,"Avg Div Ratio",i.a.createElement(S,Object.assign({value:o,onChange:function(e){return a({dividendRatioRange:e})}},o,{stepSize:.1,labelStepSize:.2,vertical:!0}))),i.a.createElement("th",null,"Model fitt",i.a.createElement(S,{value:r.value,onChange:function(e){return a({fittRange:e})},min:0,max:1,stepSize:.1,labelStepSize:.2,vertical:!0})),i.a.createElement("th",null,"Momentum 90"))),i.a.createElement("tbody",null,u.map((function(e,n){return i.a.createElement("tr",{key:n},i.a.createElement("td",null,i.a.createElement(b.a,{href:e.get("borsdataLink"),rightIcon:"share",target:"_blank",minimal:!0}),i.a.createElement(b.a,{onClick:function(){return t.push(e.get("ShortName"))},rightIcon:"grouped-bar-chart",target:"_blank",minimal:!0}),e.getIn(["Name"])),i.a.createElement("td",null,(100*e.getIn(["estimate"])).toFixed(2)+"%"),i.a.createElement("td",null,(100*e.getIn(["yield"])).toFixed(1)+"%"),i.a.createElement("td",null,e.getIn(["pe"]).toFixed(2)),i.a.createElement("td",null,(100*e.getIn(["avgDividendRatio"])).toFixed(1)+"%"),i.a.createElement("td",null,e.getIn(["fitt"]).toFixed(2)),i.a.createElement("td",null,Math.round(36500*e.getIn(["stockPriceMomentum"]))+"%"))}))))})),I=n(39);var w=Object(a.memo)((function(e){var t=e.company,n=e.onHome,a=e.onClear,r=e.onTrash,o=t.get("ShortName");return i.a.createElement(b.d,null,i.a.createElement(b.d.Group,{align:"left"},i.a.createElement(b.b,{minimal:!0,icon:"home",onClick:function(){return n()}}),i.a.createElement(b.d.Heading,null,t.get("Name")),i.a.createElement(b.d.Divider,null),i.a.createElement(b.a,{href:t.get("borsdataLink"),rightIcon:"share",target:"_blank",minimal:!0}),i.a.createElement(b.b,{minimal:!0,icon:"eraser",onClick:function(){return a(o)}}),i.a.createElement(b.b,{minimal:!0,icon:"trash",onClick:function(){return r(o)}}),i.a.createElement(b.d.Divider,null),i.a.createElement("div",null,"Estimate: ",(100*t.get("estimate")).toFixed(1),"%/y"),i.a.createElement(b.d.Divider,null),i.a.createElement("div",null,"Fitt: ",(100*t.get("fitt")).toFixed(1),"%"),i.a.createElement(b.d.Divider,null),i.a.createElement("div",null,"Dividend Ratio: ",(100*t.get("avgDividendRatio")).toFixed(1),"%")))})),k=function(e){function t(){return Object(s.a)(this,t),Object(g.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.companies,a=t.match,r=t.projectionTime,o=t.estimationTime,l=n.find((function(e){return e.get("ShortName")===a.params.id})),c=l.get("estimateFunc");console.log("company",l.toJS());var s=l.get("revenue").map((function(e,t){return Object(E.b)([{value:e,fill:e>0?"#123456":"red"},{value:-l.getIn(["netBrowing",t]),fill:l.getIn(["netBrowing",t])>0?"#ff00ff":"green"},{value:l.getIn(["freeCashFlow",t]),fill:l.getIn(["freeCashFlow",t])>0?"#0eefcd":"red"},{value:l.getIn(["earnings",t]),fill:l.getIn(["earnings",t])>0?"#2d578b":"red"},{value:l.getIn(["dividend",t]),fill:l.getIn(["dividend",t])>0?"#035C43":"red"}])})).toJS(),m=new Array(r).fill(0).map((function(e,t){return isNaN(l.getIn(["estimateAdjusted",""+t]))?{value:c(t),fill:"#035C43"}:{value:l.getIn(["estimateAdjusted",""+t]),fill:"#145C23"}})).map((function(e,t){return[Object(u.a)({},e,{onMouseDown:function(e){return R(e,t)}})]})),g=s.concat(m).flat().map((function(e){return e.value})),d=Math.max.apply(Math,[0].concat(Object(I.a)(g))),f=1e3/(d-Math.min.apply(Math,[0].concat(Object(I.a)(g)))),v=d*f,p=s.length+m.length,h=(1200-40*p)/p,b=function(e,t){return{x:40*e+h*(e+.5),y:v-t*f}},y=s.concat(m).map((function(e,t){return e.map((function(n,a){return{x:40*t+h*(t+a/e.length),y:n.value>0?v-n.value*f:v,width:8,height:Math.abs(n.value)*f,fill:n.fill,onMouseDown:n.onMouseDown}}))})).flat(),S=s.length-o,j=s.length+r,k=b(S,c(-o)),O=b(j,c(r)),R=function(t,n){t.preventDefault();document.addEventListener("mouseup",(function t(a){var i=e.svg.createSVGPoint();i.x=a.clientX,i.y=a.clientY;var r=(i=i.matrixTransform(e.svg.getScreenCTM().inverse())).y,o=(v-r)/f;e.props.setEstimateAdjusted(l.get("ShortName"),""+n,o),document.removeEventListener("mouseup",t)}))};return i.a.createElement("div",null,i.a.createElement(w,{company:l,onHome:function(){return e.props.history.goBack()},onClear:this.props.onClear,onTrash:this.props.onTrash}),i.a.createElement("div",{style:{margin:20}},i.a.createElement("svg",{width:"90vw",height:"100%",viewBox:"0 0 ".concat(1200," ").concat(1e3),ref:function(t){return e.svg=t}},y.map((function(e,t){return i.a.createElement("rect",Object.assign({},e,{key:t}))})),i.a.createElement("line",{x1:k.x,y1:k.y,x2:O.x,y2:O.y,fill:"transparent",stroke:"gray",strokeWidth:"4",strokeDasharray:"5,5",key:"line"}))))}}]),t}(i.a.Component);function O(e){var t=e.length,n=e.reduce((function(e,t,n){return e+n}),0)/t,a=e.reduce((function(e,t,n){return e+t}),0)/t,i=e.reduce((function(e,t,a){return e+(a-n)*(a-n)}),0),r=e.reduce((function(e,t,n){return e+(t-a)*(t-a)}),0),o=e.reduce((function(e,t,n){return e+n*t}),0)-t*n*a,l=o/i;return{biasStart:a,biasEnd:a-l*n+(t-1)*l,slope:l,std:Math.sqrt(r),fitt:o*o/i/r}}var R=function(e){function t(){var e;Object(s.a)(this,t),e=Object(g.a)(this,Object(d.a)(t).call(this));var n=localStorage.getItem("filterSettings"),a=localStorage.getItem("companiesInternal");return e.state=Object(u.a)({selected:"avanza",estimateType:"earnings",estimateDividendType:"sumAverage",revenueGrowth:!0,earningsGrowth:!0,netBrowingDecline:!0,fittRange:[0,1],dividendRatioRange:[0,1],peRange:[0,50],yieldRange:[0,.2],projectionTime:5,estimationTime:4},JSON.parse(n),{companiesExternal:Object(E.a)(),companiesInternal:a?Object(E.b)(JSON.parse(a)):Object(E.a)(),companiesSheets:Object(E.a)()}),e}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=h.a.get("https://bofa.github.io/stocks/earnings.json").then((function(e){return Object(E.b)(e.data.reduce((function(e,t,n){return e[t.ShortName]=t,e}),{}))}));t.then((function(t){return e.setState({companiesExternal:t})}));var n=h.a.get("https://spreadsheets.google.com/feeds/list/183-e_Hf_ZLD4D-91TtqpI35C6TQO_HanD-NKg-XjvAY/od6/public/values?alt=json").then((function(e){return e.data.feed.entry.map((function(e){return[e.gsx$keyborsdata.$t,e.gsx$price.$t]})).filter((function(e){return e[0].length>0}))}));Promise.all([t,n]).then((function(e){var t=Object(c.a)(e,2),n=t[0];return t[1].map((function(e){var t=Object(c.a)(e,2),a=t[0],i=t[1];return[n.find((function(e){return e.get("CountryUrlName")===a})),i]})).filter((function(e){return e[0]})).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return[n.get("ShortName"),{price:a}]}))})).then((function(e){return new E.a(e)})).then((function(t){return e.setState({companiesSheets:t})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.projectionTime,a=t.estimationTime,r=t.companiesExternal,o=t.companiesInternal,l=t.companiesSheets,c=t.estimateType,u=t.estimateDividendType,s=t.revenueGrowth,m=t.earningsGrowth,g=t.netBrowingDecline,d=t.fittRange,f=t.dividendRatioRange,p=t.peRange,h=t.yieldRange;if(r.size<1)return null;var y=r.mergeDeep(o).mergeDeep(l).filter((function(e){return e.has("dividend")})).map((function(e){var t=function(e,t,n,a,i,r){var o;if(void 0===(o="combo"===a?e.get("earnings").map((function(t,n){return t+e.getIn(["freeCashFlow",n])/2})):e.get(a))||o.length<r)return NaN;var l=o.slice(-r),c=l.reduce((function(e,t,n,a){return e+t})),u=e.get("dividend").slice(-r).reduce((function(e,t,n,a){return e+t}))/c,s=e.get("dividend").slice(-r).reduce((function(e,t,n,a){return e+t/l.get(n)/a.size}),0),m={all:1,sumAverage:Math.max(0,Math.min(.85,u)),individualAverage:s}[i],g=O(l.toJS()),d=function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var a=e.biasEnd,i=e.slope;return function(e){return a+i*(e+1)}}(g,e.get("netBrowing"),t,n);return{fitt:g.fitt,estimateFunc:function(e){return m*d(e)},dividendRatio:m}}(e,n,0,c,u,a),i=t.fitt,r=t.estimateFunc,o=t.dividendRatio,l=new Array(n).fill(0).map((function(t,n){return e.getIn(["estimateAdjusted",""+n])||r(n)})).reduce((function(e,t){return e+t}))/n,s=O(e.get("revenue").slice(-a).toJS()),m=O(e.get("earnings").slice(-a).toJS()),g=O(e.get("netBrowing").slice(-a).toJS());return e.set("estimate",l/e.get("price")/e.getIn(["numberOfStocks",-1])).set("estimateFunc",r).set("fitt",i).set("revenueLs",Object(E.b)(s)).set("earningsLs",Object(E.b)(m)).set("netBrowingLs",Object(E.b)(g)).set("avgDividendRatio",o).set("yield",e.getIn(["dividend",-1])/e.getIn(["price"])/e.getIn(["numberOfStocks",-1])).set("pe",e.getIn(["price"])*e.getIn(["numberOfStocks",-1])/e.getIn(["earnings",-1])).set("borsdataLink","https://borsdata.se/".concat(e.get("CountryUrlName"),"/nyckeltal"))})).toList(),S={projectionTime:n,estimationTime:a,estimateType:c,revenueGrowth:s,earningsGrowth:m,fittRange:d,dividendRatioRange:f,peRange:p,yieldRange:h,netBrowingDecline:g},I=(y.map((function(e){return e.get("fitt")})).filter((function(e){return!isNaN(e)})),y.map((function(e){return e.get("yield")})).filter((function(e){return!isNaN(e)}))),w=y.map((function(e){return e.get("avgDividendRatio")})).filter((function(e){return!isNaN(e)})).filter((function(e){return e<1e3}));console.log("avgDividendRatioValues",w.toJS(),w.min(),w.max());var R={projectionTime:n,estimationTime:a,estimateType:c,revenueGrowth:s,netBrowingDecline:g,earningsGrowth:m,fittRange:{value:d,min:0,max:1},dividendRatioRange:{value:f,min:w.min(),max:w.max()},peRange:{value:p,min:0,max:50},yieldRange:{value:h,min:I.min(),max:I.max()}},x=y.filter((function(e){return!e.get("remove")})).filter((function(e){return e.has("earnings")&&e.get("earnings").size>=a})).filter((function(e){return!s||e.getIn(["revenueLs","slope"])>0})).filter((function(e){return!m||e.getIn(["earningsLs","slope"])>0})).filter((function(e){return!g||e.getIn(["netBrowingLs","slope"])<0})).filter((function(e){return e.get("fitt")>=d[0]&&e.get("fitt")<=d[1]})).filter((function(e){return(e.get("pe")>=p[0]||p[0]<=0)&&(e.get("pe")<=p[1]||p[1]===R.peRange.max)})).filter((function(e){return e.get("yield")>=h[0]&&e.get("yield")<=h[1]})).filter((function(e){return e.get("avgDividendRatio")>=f[0]&&e.get("avgDividendRatio")<=f[1]}));return localStorage.setItem("filterSettings",JSON.stringify(S)),localStorage.setItem("companiesInternal",JSON.stringify(o)),[i.a.createElement(b.d,null,i.a.createElement(b.d.Group,{align:"left"},i.a.createElement(b.d.Heading,null,"Stock Prediction"),i.a.createElement(b.d.Divider,null),i.a.createElement("select",{value:c,onChange:function(t){return e.setState({estimateType:t.currentTarget.value})}},i.a.createElement("option",{value:"earnings"},"Earnings"),i.a.createElement("option",{value:"revenue"},"Revenue"),i.a.createElement("option",{value:"freeCashFlow"},"Free Cash Flow"),i.a.createElement("option",{value:"combo"},"Combo")),i.a.createElement("select",{value:u,onChange:function(t){return e.setState({estimateDividendType:t.currentTarget.value})}},i.a.createElement("option",{value:"all"},"All"),i.a.createElement("option",{value:"sumAverage"},"Sum Average"),i.a.createElement("option",{value:"individualAverage"},"Individual Average")),i.a.createElement(b.c,{checked:s,inline:!0,label:"Revenue Growth",onChange:function(t){return e.setState({revenueGrowth:t.target.checked})}}),i.a.createElement(b.c,{checked:m,inline:!0,label:"Earnings Growth",onChange:function(t){return e.setState({earningsGrowth:t.target.checked})}}),i.a.createElement(b.c,{checked:g,inline:!0,label:"Net Borow Decline",onChange:function(t){return e.setState({netBrowingDecline:t.target.checked})}}),i.a.createElement(b.e,{content:i.a.createElement("div",{width:200,style:{padding:10}},i.a.createElement(b.g,{value:a,onChange:function(t){return e.setState({estimationTime:t})},min:2,max:10,stepSize:1,labelStepSize:2,vertical:!0}))},i.a.createElement(b.b,{icon:"filter",minimal:!0},a," Est Time")),i.a.createElement(b.e,{content:i.a.createElement("div",{width:200,style:{padding:10}},i.a.createElement(b.g,{value:n,onChange:function(t){return e.setState({projectionTime:t})},min:2,max:10,stepSize:1,labelStepSize:2,vertical:!0}))},i.a.createElement(b.b,{icon:"filter",minimal:!0},n," Proj Time")))),i.a.createElement(v.a,{key:"routeTable",path:"/",exact:!0,render:function(t){return i.a.createElement(j,Object.assign({key:"table"},t,{companies:x},R,{onChange:function(t){return e.setState(t)}}))}}),i.a.createElement(v.a,{key:"routeGraph",path:"/:id",exact:!0,render:function(t){return i.a.createElement(k,Object.assign({key:"graph"},t,{estimationTime:a,projectionTime:n,companies:y,onClear:function(t){return e.setState({companiesInternal:e.state.companiesInternal.setIn([t,"estimateAdjusted"],Object(E.b)({}))})},onTrash:function(t){return e.setState({companiesInternal:e.state.companiesInternal.setIn([t,"remove"],!0)})},setEstimateAdjusted:function(t,n,a){return e.setState({companiesInternal:e.state.companiesInternal.setIn([t,"estimateAdjusted",n],a)})}}))}})]}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(l.a,null,i.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[111,1,2]]]);
//# sourceMappingURL=main.c0650a28.chunk.js.map
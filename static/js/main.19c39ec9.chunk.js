(this.webpackJsonpnordicprediction=this.webpackJsonpnordicprediction||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),l=n.n(i),o=n(66),c=(n(77),n(78),n(79),n(80),n(81),n(29)),u=n(30),s=n(33),m=n(31),g=n(34),d=n(17),f=n(62),v=n.n(f),h=n(18),p=n(114),E=n(116),b=n(115),y=n(117),S=n(32),x=n(113);var k=Object(S.a)((function(e){return r.a.createElement(E.a,{content:r.a.createElement("div",{width:200,style:{padding:10}},r.a.createElement(x.a,e))},r.a.createElement(y.b,{icon:"filter",minimal:!0}))}));var w=Object(S.a)((function(e){var t=e.history,n=e.companies,a=e.onChange,i=e.fittRange,l=e.dividendRatioRange,o=e.peRange,c=e.yieldRange,u=n.filter((function(e){return e.get("estimate")})).sortBy((function(e){return-e.get("estimate")}));return r.a.createElement("table",{className:"bp3-html-table .modifier",key:"insideTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Estimate"),r.a.createElement("th",null,"Yield",r.a.createElement(k,{value:c,onChange:function(e){return a({yieldRange:e})},min:0,max:.2,stepSize:.01,labelStepSize:.02,vertical:!0})),r.a.createElement("th",null,"P/E",r.a.createElement(k,{value:o,onChange:function(e){return a({peRange:e})},min:-100,max:100,stepSize:1,labelStepSize:20,vertical:!0})),r.a.createElement("th",null,"Avg Div Ratio",r.a.createElement(k,{value:l,onChange:function(e){return a({dividendRatioRange:e})},min:0,max:2,stepSize:.1,labelStepSize:.1,vertical:!0})),r.a.createElement("th",null,"Model fitt",r.a.createElement(k,{value:i,onChange:function(e){return a({fittRange:e})},min:0,max:1,stepSize:.1,labelStepSize:.2,vertical:!0})),r.a.createElement("th",null,"Momentum 90"))),r.a.createElement("tbody",null,u.map((function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null,r.a.createElement(y.a,{href:e.get("borsdataLink"),rightIcon:"share",target:"_blank",minimal:!0}),r.a.createElement(y.a,{onClick:function(){return t.push(e.get("ShortName"))},rightIcon:"grouped-bar-chart",target:"_blank",minimal:!0}),e.getIn(["Name"])),r.a.createElement("td",null,(100*e.getIn(["estimate"])).toFixed(2)+"%"),r.a.createElement("td",null,(100*e.getIn(["yield"])).toFixed(1)+"%"),r.a.createElement("td",null,e.getIn(["pe"]).toFixed(2)),r.a.createElement("td",null,(100*e.getIn(["avgDividendRatio"])).toFixed(1)+"%"),r.a.createElement("td",null,e.getIn(["fitt"]).toFixed(2)),r.a.createElement("td",null,Math.round(36500*e.getIn(["stockPriceMomentum"]))+"%"))}))))})),R=n(43),j=r.a.createContext(),I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(m.a)(t).call(this))).startDrag=function(t,n){t.preventDefault();var a=function(t){t.preventDefault();var a=e.svg.createSVGPoint();a.x=t.clientX,a.y=t.clientY,a=a.matrixTransform(e.svg.getScreenCTM().inverse()),e.setState({points:e.state.points.map((function(e,t){return n===t?{x:Math.max(Math.min(a.x,1e3),0),y:Math.max(Math.min(a.y,1e3),0)}:e}))})};document.addEventListener("mousemove",a),document.addEventListener("mouseup",(function e(t){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e)}))},e.state={points:[{x:30,y:900},{x:900,y:900}]},e}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.companies,a=t.match,i=t.projectionTime,l=t.estimationTime,o=this.state.points,c=n.find((function(e){return e.get("ShortName")===a.params.id})),u=c.get("estimateFunc"),s=c.get("revenue").map((function(e,t){return Object(h.a)([{value:e,fill:e>0?"#123456":"red"},{value:c.getIn(["freeCashFlow",t]),fill:c.getIn(["freeCashFlow",t])>0?"#0eefcd":"red"},{value:c.getIn(["earnings",t]),fill:c.getIn(["earnings",t])>0?"#2d578b":"red"},{value:c.getIn(["dividend",t]),fill:c.getIn(["dividend",t])>0?"#035C43":"red"}])})).toJS(),m=new Array(i).fill(0).map((function(e,t){return u(t)})).map((function(e){return[{value:e,fill:e>0?"#035C43":"#ff0000"}]})),g=s.concat(m).flat().map((function(e){return e.value})),d=Math.max.apply(Math,[0].concat(Object(R.a)(g))),f=1e3/(d-Math.min.apply(Math,[0].concat(Object(R.a)(g)))),v=d*f,p=s.length+m.length,E=(1200-40*p)/p,b=function(e,t){return{x:40*e+E*(e+.5),y:v-t*f}},y=s.concat(m).map((function(e,t){return e.map((function(n,a){return{x:40*t+E*(t+a/e.length),y:n.value>0?v-n.value*f:v,width:10,height:Math.abs(n.value)*f,fill:n.fill}}))})).flat();console.log("historicBars",f,y);var S=s.length-l,x=s.length+i,k=b(S,u(-l)),w=b(x,u(i));return console.log("line",S,x,k,w),r.a.createElement("div",{style:{margin:20}},r.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(1200," ").concat(1e3),ref:function(t){return e.svg=t}},y.map((function(e,t){return r.a.createElement("rect",Object.assign({},e,{key:t}))})),r.a.createElement("line",{x1:k.x,y1:k.y,x2:w.x,y2:w.y,fill:"transparent",stroke:"gray",strokeWidth:"4",strokeDasharray:"5,5",key:"line"}),o.map((function(t,n){return r.a.createElement("g",{transform:"translate(-15, -15)",key:n},r.a.createElement("rect",{x:t.x,y:t.y,key:n,width:"30",height:"30",onMouseDown:function(t){return e.startDrag(t,n)}}))}))))}}]),t}(r.a.Component);I.contextType=j;var C=I;n(44);function O(e){var t=e.length,n=e.reduce((function(e,t,n){return e+n}),0)/t,a=e.reduce((function(e,t,n){return e+t}),0)/t,r=e.reduce((function(e,t,a){return e+(a-n)*(a-n)}),0),i=e.reduce((function(e,t,n){return e+(t-a)*(t-a)}),0),l=e.reduce((function(e,t,n){return e+n*t}),0)-t*n*a,o=l/r;return{biasStart:a,biasEnd:a-o*n+(t-1)*o,slope:o,std:Math.sqrt(i),fitt:l*l/r/i}}var T=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selected:"avanza",estimateType:"earnings",revenueGrowth:!0,earningsGrowth:!0,fittRange:[0,1],dividendRatioRange:[0,1],peRange:[0,100],yieldRange:[0,.2],projectionTime:5,estimationTime:4,companiesExternal:Object(h.a)({}),companiesInternal:Object(h.a)({})},n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.get("https://bofa.github.io/stock-prediction/earnings.json").then((function(t){var n=t.data.reduce((function(e,t,n){return e[t.ShortName]=t,e}),{});e.setState({companiesExternal:Object(h.a)(n)})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.projectionTime,a=t.estimationTime,i=t.companiesExternal,l=t.companiesInternal,o=t.estimateType,c=t.revenueGrowth,u=t.earningsGrowth,s=t.fittRange,m=t.dividendRatioRange,g=t.peRange,f=t.yieldRange;if(i.size<1)return null;var v=i.filter((function(e){return e.has("earnings")&&e.get("earnings").size>=a})).map((function(e){var t=function(e,t,n,a,r){var i,l=e.toJS(),o=l.avgDividendRatio,c=l.netBrowing,u=l.earnings,s=Math.min(o,.8);if(void 0===(i="combo"===a?l.earnings.map((function(e,t){return(e+l.freeCashFlow[t])/2})):l[a])||i.length<r)return NaN;var m=O(i.slice(u.length-r,u.length)),g=function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var a=e.biasEnd,r=e.slope;return function(e){return a+r*(e+1)}}(m,c,t,n);return{estimate:new Array(t).fill(0).map((function(e,t){return s*g(t)})).reduce((function(e,t){return e+t}))/t,fitt:m.fitt,estimateFunc:function(e){return s*g(e)}}}(e,n,0,o,a),r=t.estimate,i=t.fitt,l=t.estimateFunc,c=O(e.get("revenue").slice(-a).toJS()),u=O(e.get("earnings").slice(-a).toJS());return e.set("estimate",r/e.get("price")/e.getIn(["numberOfStocks",-1])).set("estimateFunc",l).set("fitt",i).set("revenueLs",Object(h.a)(c)).set("earningsLs",Object(h.a)(u)).set("yield",e.getIn(["dividend",-1])/e.getIn(["price"])/e.getIn(["numberOfStocks",-1])).set("pe",e.getIn(["price"])*e.getIn(["numberOfStocks",-1])/e.getIn(["earnings",-1])).set("borsdataLink","https://borsdata.se/".concat(e.get("CountryUrlName"),"/nyckeltal"))})).filter((function(e){return!c||e.getIn(["revenueLs","slope"])>0})).filter((function(e){return!u||e.getIn(["earningsLs","slope"])>0})).mergeDeep(l).filter((function(e){return e.get("fitt")>=s[0]&&e.get("fitt")<=s[1]})).filter((function(e){return e.get("pe")>=g[0]&&e.get("pe")<=g[1]})).filter((function(e){return e.get("yield")>=f[0]&&e.get("yield")<=f[1]})).filter((function(e){return e.get("avgDividendRatio")>=m[0]&&e.get("avgDividendRatio")<=m[1]})).toList();console.log("mergedCompanies",v.toJS());var S={fittRange:s,dividendRatioRange:m,peRange:g,yieldRange:f};return[r.a.createElement("nav",{className:"bp3-navbar .modifier",key:"navbar"},r.a.createElement("div",{className:"bp3-navbar-group bp3-align-left"},r.a.createElement("div",{className:"bp3-navbar-heading"},"Prediction"),r.a.createElement("div",{className:"bp3-select .modifier"},r.a.createElement("select",{value:o,onChange:function(t){return e.setState({estimateType:t.currentTarget.value})}},r.a.createElement("option",{value:"earnings"},"Earnings"),r.a.createElement("option",{value:"revenue"},"Revenue"),r.a.createElement("option",{value:"freeCashFlow"},"Free Cash Flow"),r.a.createElement("option",{value:"combo"},"Combo"))),r.a.createElement("div",{className:"bp3-navbar-group"},r.a.createElement(p.a,{checked:c,inline:!0,label:"Revenue Growth",onChange:function(t){return e.setState({revenueGrowth:t.target.checked})}}),r.a.createElement(p.a,{checked:u,inline:!0,label:"Earnings Growth",onChange:function(t){return e.setState({earningsGrowth:t.target.checked})}})),r.a.createElement("div",null,r.a.createElement(E.a,{content:r.a.createElement("div",{width:200,style:{padding:10}},r.a.createElement(b.a,{value:a,onChange:function(t){return e.setState({estimationTime:t})},min:2,max:10,stepSize:1,labelStepSize:2,vertical:!0}))},r.a.createElement(y.b,{icon:"filter",minimal:!0},a," Est Time"))),r.a.createElement("div",null,r.a.createElement(E.a,{content:r.a.createElement("div",{width:200,style:{padding:10}},r.a.createElement(b.a,{value:n,onChange:function(t){return e.setState({projectionTime:t})},min:2,max:10,stepSize:1,labelStepSize:2,vertical:!0}))},r.a.createElement(y.b,{icon:"filter",minimal:!0},n," Proj Time"))))),r.a.createElement(d.a,{key:"routeTable",path:"/",exact:!0,render:function(t){return r.a.createElement(w,Object.assign({key:"table"},t,{companies:v},S,{onChange:function(t){return e.setState(t)}}))}}),r.a.createElement(d.a,{key:"routeGraph",path:"/:id",exact:!0,render:function(e){return r.a.createElement(C,Object.assign({key:"graph"},e,{estimationTime:a,projectionTime:n,companies:v}))}})]}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(o.a,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,n){e.exports=n(110)},81:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.19c39ec9.chunk.js.map
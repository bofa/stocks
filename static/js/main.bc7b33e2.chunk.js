(this.webpackJsonpnordicprediction=this.webpackJsonpnordicprediction||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),o=n.n(i),c=n(67),l=(n(78),n(79),n(80),n(81),n(82),n(29)),u=n(30),s=n(31),m=n(34),g=n(32),d=n(35),f=n(18),p=n(63),h=n.n(p),v=n(12),b=n(119),E=n(115),y=n(117),O=n(116),j=n(118),S=n(33),w=n(114);var I=Object(S.a)((function(e){return r.a.createElement(y.a,{content:r.a.createElement("div",{width:200,style:{padding:10}},r.a.createElement(w.a,e))},r.a.createElement(j.b,{icon:"filter",minimal:!0}))}));var k=Object(S.a)((function(e){var t=e.history,n=e.companies,a=e.onChange,i=e.fittRange,o=e.dividendRatioRange,c=e.peRange,l=e.yieldRange,u=n.sortBy((function(e){return-e.get("estimate")}));return r.a.createElement("table",{className:"bp3-html-table .modifier",key:"insideTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Estimate"),r.a.createElement("th",null,"Yield",r.a.createElement(I,{value:l,onChange:function(e){return a({yieldRange:e})},min:0,max:.2,stepSize:.01,labelStepSize:.02,vertical:!0})),r.a.createElement("th",null,"P/E",r.a.createElement(I,{value:c,onChange:function(e){return a({peRange:e})},min:-100,max:100,stepSize:1,labelStepSize:20,vertical:!0})),r.a.createElement("th",null,"Avg Div Ratio",r.a.createElement(I,{value:o,onChange:function(e){return a({dividendRatioRange:e})},min:0,max:2,stepSize:.1,labelStepSize:.1,vertical:!0})),r.a.createElement("th",null,"Model fitt",r.a.createElement(I,{value:i,onChange:function(e){return a({fittRange:e})},min:0,max:1,stepSize:.1,labelStepSize:.2,vertical:!0})),r.a.createElement("th",null,"Momentum 90"))),r.a.createElement("tbody",null,u.map((function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null,r.a.createElement(j.a,{href:e.get("borsdataLink"),rightIcon:"share",target:"_blank",minimal:!0}),r.a.createElement(j.a,{onClick:function(){return t.push(e.get("ShortName"))},rightIcon:"grouped-bar-chart",target:"_blank",minimal:!0}),e.getIn(["Name"])),r.a.createElement("td",null,(100*e.getIn(["estimate"])).toFixed(2)+"%"),r.a.createElement("td",null,(100*e.getIn(["yield"])).toFixed(1)+"%"),r.a.createElement("td",null,e.getIn(["pe"]).toFixed(2)),r.a.createElement("td",null,(100*e.getIn(["avgDividendRatio"])).toFixed(1)+"%"),r.a.createElement("td",null,e.getIn(["fitt"]).toFixed(2)),r.a.createElement("td",null,Math.round(36500*e.getIn(["stockPriceMomentum"]))+"%"))}))))})),R=n(45);var C=Object(a.memo)((function(e){var t=e.company,n=e.onHome,a=e.onClear,i=e.onTrash,o=t.get("ShortName");return r.a.createElement(b.a,null,r.a.createElement(b.a.Group,{align:"left"},r.a.createElement(j.b,{minimal:!0,icon:"home",onClick:function(){return n()}}),r.a.createElement(b.a.Heading,null,t.get("Name")),r.a.createElement(b.a.Divider,null),r.a.createElement(j.a,{href:t.get("borsdataLink"),rightIcon:"share",target:"_blank",minimal:!0}),r.a.createElement(j.b,{minimal:!0,icon:"eraser",onClick:function(){return a(o)}}),r.a.createElement(j.b,{minimal:!0,icon:"trash",onClick:function(){return i(o)}}),r.a.createElement(b.a.Divider,null),r.a.createElement("div",null,"Estimate: ",(100*t.get("estimate")).toFixed(1),"%/y"),r.a.createElement(b.a.Divider,null),r.a.createElement("div",null,"Fitt: ",(100*t.get("fitt")).toFixed(1),"%")))}));function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.companies,a=t.match,i=t.projectionTime,o=t.estimationTime,c=n.find((function(e){return e.get("ShortName")===a.params.id})),l=c.get("estimateFunc");console.log("company",c.toJS());var u=c.get("revenue").map((function(e,t){return Object(v.a)([{value:e,fill:e>0?"#123456":"red"},{value:-c.getIn(["netBrowing",t]),fill:c.getIn(["netBrowing",t])>0?"#ff00ff":"green"},{value:c.getIn(["freeCashFlow",t]),fill:c.getIn(["freeCashFlow",t])>0?"#0eefcd":"red"},{value:c.getIn(["earnings",t]),fill:c.getIn(["earnings",t])>0?"#2d578b":"red"},{value:c.getIn(["dividend",t]),fill:c.getIn(["dividend",t])>0?"#035C43":"red"}])})).toJS(),s=new Array(i).fill(0).map((function(e,t){return isNaN(c.getIn(["estimateAdjusted",""+t]))?{value:l(t),fill:"#035C43"}:{value:c.getIn(["estimateAdjusted",""+t]),fill:"#145C23"}})).map((function(e,t){return[D({},e,{onMouseDown:function(e){return w(e,t)}})]})),m=u.concat(s).flat().map((function(e){return e.value})),g=Math.max.apply(Math,[0].concat(Object(R.a)(m))),d=1e3/(g-Math.min.apply(Math,[0].concat(Object(R.a)(m)))),f=g*d,p=u.length+s.length,h=(1200-40*p)/p,b=function(e,t){return{x:40*e+h*(e+.5),y:f-t*d}},E=u.concat(s).map((function(e,t){return e.map((function(n,a){return{x:40*t+h*(t+a/e.length),y:n.value>0?f-n.value*d:f,width:8,height:Math.abs(n.value)*d,fill:n.fill,onMouseDown:n.onMouseDown}}))})).flat(),y=u.length-o,O=u.length+i,j=b(y,l(-o)),S=b(O,l(i)),w=function(t,n){t.preventDefault();document.addEventListener("mouseup",(function t(a){var r=e.svg.createSVGPoint();r.x=a.clientX,r.y=a.clientY;var i=(r=r.matrixTransform(e.svg.getScreenCTM().inverse())).y,o=(f-i)/d;e.props.setEstimateAdjusted(c.get("ShortName"),""+n,o),document.removeEventListener("mouseup",t)}))};return r.a.createElement("div",null,r.a.createElement(C,{company:c,onHome:function(){return e.props.history.goBack()},onClear:this.props.onClear,onTrash:this.props.onTrash}),r.a.createElement("div",{style:{margin:20}},r.a.createElement("svg",{width:"90vw",height:"100%",viewBox:"0 0 ".concat(1200," ").concat(1e3),ref:function(t){return e.svg=t}},E.map((function(e,t){return r.a.createElement("rect",Object.assign({},e,{key:t}))})),r.a.createElement("line",{x1:j.x,y1:j.y,x2:S.x,y2:S.y,fill:"transparent",stroke:"gray",strokeWidth:"4",strokeDasharray:"5,5",key:"line"}))))}}]),t}(r.a.Component);n(46);function P(e){var t=e.length,n=e.reduce((function(e,t,n){return e+n}),0)/t,a=e.reduce((function(e,t,n){return e+t}),0)/t,r=e.reduce((function(e,t,a){return e+(a-n)*(a-n)}),0),i=e.reduce((function(e,t,n){return e+(t-a)*(t-a)}),0),o=e.reduce((function(e,t,n){return e+n*t}),0)-t*n*a,c=o/r;return{biasStart:a,biasEnd:a-c*n+(t-1)*c,slope:c,std:Math.sqrt(i),fitt:o*o/r/i}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var F=function(e){function t(){var e;Object(u.a)(this,t),e=Object(m.a)(this,Object(g.a)(t).call(this));var n=localStorage.getItem("filterSettings"),a=localStorage.getItem("companiesInternal");return e.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({selected:"avanza",estimateType:"earnings",revenueGrowth:!0,earningsGrowth:!0,netBrowingDecline:!0,fittRange:[0,1],dividendRatioRange:[0,1],peRange:[0,100],yieldRange:[0,.2],projectionTime:5,estimationTime:4},JSON.parse(n),{companiesExternal:Object(v.a)({}),companiesInternal:a?Object(v.a)(JSON.parse(a)):Object(v.a)({})}),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.get("https://bofa.github.io/stocks/earnings.json").then((function(t){var n=t.data.reduce((function(e,t,n){return e[t.ShortName]=t,e}),{});e.setState({companiesExternal:Object(v.a)(n)})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.projectionTime,a=t.estimationTime,i=t.companiesExternal,o=t.companiesInternal,c=t.estimateType,l=t.revenueGrowth,u=t.earningsGrowth,s=t.netBrowingDecline,m=t.fittRange,g=t.dividendRatioRange,d=t.peRange,p=t.yieldRange;if(i.size<1)return null;var h=i.mergeDeep(o).map((function(e){var t=function(e,t,n,a,r){var i;if(void 0===(i="combo"===a?e.get("earnings").map((function(t,n){return t+e.getIn(["freeCashFlow",n])/2})):e.get(a))||i.length<r)return NaN;var o=i.slice(-r),c=o.reduce((function(e,t,n,a){return e+t})),l=e.get("dividend").slice(-r).reduce((function(e,t,n,a){return e+t}))/c,u=P(o.toJS()),s=function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var a=e.biasEnd,r=e.slope;return function(e){return a+r*(e+1)}}(u,e.get("netBrowing"),t,n);return{fitt:u.fitt,estimateFunc:function(e){return Math.max(0,Math.min(.8,l))*s(e)},dividendRatio:l}}(e,n,0,c,a),r=t.fitt,i=t.estimateFunc,o=t.dividendRatio,l=new Array(n).fill(0).map((function(t,n){return e.getIn(["estimateAdjusted",""+n])||i(n)})).reduce((function(e,t){return e+t}))/n,u=P(e.get("revenue").slice(-a).toJS()),s=P(e.get("earnings").slice(-a).toJS()),m=P(e.get("netBrowing").slice(-a).toJS());return e.set("estimate",l/e.get("price")/e.getIn(["numberOfStocks",-1])).set("estimateFunc",i).set("fitt",r).set("revenueLs",Object(v.a)(u)).set("earningsLs",Object(v.a)(s)).set("netBrowingLs",Object(v.a)(m)).set("avgDividendRatio",o).set("yield",e.getIn(["dividend",-1])/e.getIn(["price"])/e.getIn(["numberOfStocks",-1])).set("pe",e.getIn(["price"])*e.getIn(["numberOfStocks",-1])/e.getIn(["earnings",-1])).set("borsdataLink","https://borsdata.se/".concat(e.get("CountryUrlName"),"/nyckeltal"))})).toList(),S=h.filter((function(e){return!e.get("remove")})).filter((function(e){return e.has("earnings")&&e.get("earnings").size>=a})).filter((function(e){return!l||e.getIn(["revenueLs","slope"])>0})).filter((function(e){return!u||e.getIn(["earningsLs","slope"])>0})).filter((function(e){return!s||e.getIn(["netBrowingLs","slope"])<0})).filter((function(e){return e.get("fitt")>=m[0]&&e.get("fitt")<=m[1]})).filter((function(e){return e.get("pe")>=d[0]&&e.get("pe")<=d[1]})).filter((function(e){return e.get("yield")>=p[0]&&e.get("yield")<=p[1]})).filter((function(e){return e.get("avgDividendRatio")>=g[0]&&e.get("avgDividendRatio")<=g[1]})),w={projectionTime:n,estimationTime:a,estimateType:c,revenueGrowth:l,earningsGrowth:u,fittRange:m,dividendRatioRange:g,peRange:d,yieldRange:p,netBrowingDecline:s};return localStorage.setItem("filterSettings",JSON.stringify(w)),localStorage.setItem("companiesInternal",JSON.stringify(o)),[r.a.createElement(b.a,null,r.a.createElement(b.a.Group,{align:"left"},r.a.createElement(b.a.Heading,null,"Stock Prediction"),r.a.createElement(b.a.Divider,null),r.a.createElement("select",{value:c,onChange:function(t){return e.setState({estimateType:t.currentTarget.value})}},r.a.createElement("option",{value:"earnings"},"Earnings"),r.a.createElement("option",{value:"revenue"},"Revenue"),r.a.createElement("option",{value:"freeCashFlow"},"Free Cash Flow"),r.a.createElement("option",{value:"combo"},"Combo")),r.a.createElement(E.a,{checked:l,inline:!0,label:"Revenue Growth",onChange:function(t){return e.setState({revenueGrowth:t.target.checked})}}),r.a.createElement(E.a,{checked:u,inline:!0,label:"Earnings Growth",onChange:function(t){return e.setState({earningsGrowth:t.target.checked})}}),r.a.createElement(E.a,{checked:s,inline:!0,label:"Net Borow Decline",onChange:function(t){return e.setState({netBrowingDecline:t.target.checked})}}),r.a.createElement(y.a,{content:r.a.createElement("div",{width:200,style:{padding:10}},r.a.createElement(O.a,{value:a,onChange:function(t){return e.setState({estimationTime:t})},min:2,max:10,stepSize:1,labelStepSize:2,vertical:!0}))},r.a.createElement(j.b,{icon:"filter",minimal:!0},a," Est Time")),r.a.createElement(y.a,{content:r.a.createElement("div",{width:200,style:{padding:10}},r.a.createElement(O.a,{value:n,onChange:function(t){return e.setState({projectionTime:t})},min:2,max:10,stepSize:1,labelStepSize:2,vertical:!0}))},r.a.createElement(j.b,{icon:"filter",minimal:!0},n," Proj Time")))),r.a.createElement(f.a,{key:"routeTable",path:"/",exact:!0,render:function(t){return r.a.createElement(k,Object.assign({key:"table"},t,{companies:S},w,{onChange:function(t){return e.setState(t)}}))}}),r.a.createElement(f.a,{key:"routeGraph",path:"/:id",exact:!0,render:function(t){return r.a.createElement(T,Object.assign({key:"graph"},t,{estimationTime:a,projectionTime:n,companies:h,onClear:function(t){return e.setState({companiesInternal:e.state.companiesInternal.setIn([t,"estimateAdjusted"],Object(v.a)({}))})},onTrash:function(t){return e.setState({companiesInternal:e.state.companiesInternal.setIn([t,"remove"],!0)})},setEstimateAdjusted:function(t,n,a){return e.setState({companiesInternal:e.state.companiesInternal.setIn([t,"estimateAdjusted",n],a)})}}))}})]}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},73:function(e,t,n){e.exports=n(111)},82:function(e,t,n){}},[[73,1,2]]]);
//# sourceMappingURL=main.bc7b33e2.chunk.js.map